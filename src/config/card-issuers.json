{
  "spec_version": "0.1",
  "global_extractors": {
    "amount": "(?P<amount>[0-9０-９][0-9０-９,，]*?)\\s*円",
    "datetime_iso": "(?P<date>\\d{4}[\\/\\.\\-年]\\d{1,2}[\\/\\.\\-月]\\d{1,2})[日\\s　]*(?P<time>\\d{1,2}:\\d{2})?",
    "datetime_jp": "(?P<year>\\d{4})年(?P<mon>\\d{1,2})月(?P<day>\\d{1,2})日\\s*(?P<timejp>\\d{1,2}:\\d{2})?",
    "merchant_variants": [
      "ご利用先店名[:：]\\s*(?P<merchant>.+?)\\s*(?:\\n|$)",
      "ご利用先[:：]\\s*(?P<merchant>.+?)\\s*(?:\\n|$)",
      "利用先[:：]\\s*(?P<merchant>.+?)\\s*(?:\\n|$)",
      "【ご利用先】\\s*(?P<merchant>.+?)\\s*(?:\\n|$)"
    ]
  },
  "issuers": [
    {
      "issuer": "三井住友カード (SMBC)",
      "service_names": ["ご利用通知サービス", "ご利用のお知らせ"],
      "from_domains": ["smbc-card.com"], 
      "subject_regex": [
        "ご利用のお知らせ.*三井住友カード",
        "【三井住友カード】.*ご利用のお知らせ"
      ],
      "body_markers": [
        "カードご利用の承認照会に基づく通知",
        "ご利用先店名",
        "ご利用内容をお知らせいたします"
      ],
      "field_extractors": {
        "date_time": ["datetime_iso", "datetime_jp"],
        "amount": "amount",
        "merchant": "merchant_variants"
      },
      "notes": "公式サンプルに準拠。通知は承認ベースで請求確定ではない旨の注記が入ることが多い。"
    },
    {
      "issuer": "楽天カード",
      "service_names": ["カード利用お知らせメール", "【速報版】カード利用のお知らせ"],
      "from_domains": ["mail.rakuten-card.co.jp", "mkrm.rakuten.co.jp", "bounce.rakuten-card.co.jp"],
      "subject_regex": [
        "【楽天カード】カード利用のお知らせ",
        "カード利用お知らせメール",
        "【速報版】カード利用のお知らせ"
      ],
      "body_markers": [
        "楽天カード", "カード利用お知らせ", "e-NAVI"
      ],
      "field_extractors": {
        "date_time": ["datetime_iso", "datetime_jp"],
        "amount": "amount",
        "merchant": "merchant_variants"
      },
      "notes": "「カード利用のお知らせ」は正式名称として案内あり。送信元ドメインでの判定を強める。"
    },
    {
      "issuer": "JCB",
      "service_names": ["カードご利用通知", "カードご利用内容の確認のお願い（不正検知時）"],
      "from_domains": ["jcb.co.jp", "qa.jcb.co.jp"],
      "subject_regex": [
        "JCBカード.*ショッピングご利用のお知らせ",
        "カードご利用内容の確認のお願い",
        "【JCB】.*ご利用.*確認"
      ],
      "body_markers": [
        "JCBカードのご利用がありました",
        "メール本文にURLの記載はありません", 
        "認証コード"
      ],
      "field_extractors": {
        "date_time": ["datetime_iso", "datetime_jp"],
        "amount": "amount",
        "merchant": "merchant_variants"
      },
      "notes": "JCBは\"確認メール\"の正式案内がある。通常の利用速報はアプリ中心。本文にURLなし仕様のFAQあり。"
    },
    {
      "issuer": "au PAYカード",
      "service_names": ["ご利用速報メール", "ご請求金額確定のお知らせ(毎月)"],
      "from_domains": ["kddi-fs.com"],
      "subject_regex": [
        "au\\s*PAY\\s*カード.*ご利用速報",
        "ご請求金額確定のお知らせ"
      ],
      "body_markers": [
        "ご利用速報メール",
        "請求を確定するものではありません"
      ],
      "field_extractors": {
        "date_time": ["datetime_iso", "datetime_jp"],
        "amount": "amount",
        "merchant": "merchant_variants"
      },
      "notes": "22時〜翌8時利用分は翌朝配信など運用上の注意が公式に明示あり。"
    },
    {
      "issuer": "PayPayカード",
      "service_names": ["カード利用速報"],
      "from_domains": ["paypay-card.co.jp"], 
      "subject_regex": [
        "PayPayカード.*カード利用速報",
        "カード利用速報"
      ],
      "body_markers": [
        "PayPayアプリの取引履歴",
        "メッセージボックス"
      ],
      "field_extractors": {
        "date_time": ["datetime_iso", "datetime_jp"],
        "amount": "amount",
        "merchant": "merchant_variants"
      },
      "notes": "アプリ通知とメール通知で配信条件が異なる旨が公式記載。"
    },
    {
      "issuer": "MUFGカード/三菱UFJニコス",
      "service_names": ["請求お知らせメール"],
      "from_domains": ["cr.mufg.jp"],
      "subject_regex": [
        "請求お知らせメール",
        "MUFGカード.*請求額"
      ],
      "body_markers": [
        "毎月の請求額が確定した際にメールでお知らせ"
      ],
      "field_extractors": {
        "date_time": ["datetime_iso", "datetime_jp"],
        "amount": "amount"
      },
      "notes": "リアルタイム速報というより\"請求確定\"系通知。"
    },
    {
      "issuer": "イオンカード",
      "service_names": ["ご請求額のお知らせ（メール）"],
      "from_domains": ["aeon.co.jp"],
      "subject_regex": [
        "イオンカード.*ご請求額",
        "【イオンカード】.*請求"
      ],
      "body_markers": [
        "イオンカード暮らしのマネーサイト",
        "請求系の正式メールは冒頭に氏名記載"
      ],
      "field_extractors": {
        "date_time": ["datetime_iso", "datetime_jp"],
        "amount": "amount",
        "merchant": "merchant_variants"
      },
      "notes": "請求系の正式メールは冒頭に氏名記載の運用変更あり。"
    },
    {
      "issuer": "American Express（日本）",
      "service_names": ["ご請求金額確定のご案内", "ご利用確認"],
      "from_domains": ["americanexpress.com", "aexp.com", "americanexpress.co.jp"],
      "subject_regex": [
        "AMERICAN\\s*EXPRESS.*ご請求金額確定のご案内",
        "American\\s*Express.*カードご利用金額のお知らせ"
      ],
      "body_markers": [
        "カード番号下[5-6]桁の記載を確認"
      ],
      "field_extractors": {
        "date_time": ["datetime_iso", "datetime_jp"],
        "amount": "amount",
        "merchant": "merchant_variants"
      },
      "notes": "公式は\"下5〜6桁の記載確認\"を案内。速報はアプリ寄り、メールは請求/確認系が多い。"
    }
  ]
}